<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>修改小程序信息 - 靠谱</title>
	<link href="../../../img/logo-sig.png" rel="shortcut icon">
    <link href="../../scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="../../styles/animate.min.css?v=3.1.0" rel="stylesheet">
    <link href="../../scripts/fontawesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="../../styles/common.css" rel="stylesheet">
	<style>
		.form-item { min-height:inherit; margin-bottom:15px;}
	</style>
</head>
<body class="body-bg-gray p-10">

	<div class="mc-bg-white box-clear p-10 border view-data-container" id="viewContainer">
		<div class="p-15 form-group-wrapper view-data-mode">
			<div class="form-item">
				<span class="form-item-title">小程序名称：</span>
				<div class="form-item-content strong" data-bind="shop_name">-</div>
			</div>

			<div class="form-item">
				<span class="form-item-title">模板：</span>
				<div class="form-item-content">
					<span data-bind="template_name">-</span>
				</div>
			</div>

			<div class="form-item" hidden>
				<span class="form-item-title">小程序类型：</span>
				<div class="form-item-content">
					<span data-bind="industry_name">-</span>
				</div>
			</div>

			<div class="form-item" hidden>
				<span class="form-item-title">主营商品：</span>
				<div class="form-item-content">
					<span data-bind="commodity_category_text">-</span>
				</div>
			</div>

			<div class="form-item">
				<span class="form-item-title">公司：</span>
				<div class="form-item-content">
					<span data-bind="company_name" data-default-value="无">-</span>
				</div>
			</div>

			<div class="form-item">
				<span class="form-item-title">联系电话：</span>
				<div class="form-item-content">
					<span data-bind="contact" data-default-value="无">-</span>
				</div>
			</div>

			<div class="form-item">
				<span class="form-item-title">联系地址：</span>
				<div class="form-item-content">
					<span data-bind="province_name"></span>
					<span data-bind="city_name"></span>
					<span data-bind="district_name"></span>
					<span class="ml-10" data-bind="address">-</span>
				</div>
			</div>

			<div class="form-item">
				<span class="form-item-title">描述：</span>
				<div class="form-item-content">
					<span class="show-box" data-bind="description" data-default-value="无">-</span>
				</div>
			</div>
			<div class="form-item">
				<span class="form-item-title">备注：</span>
				<div class="form-item-content">
					<span class="show-box" data-bind="remark" data-default-value="无">-</span>
				</div>
			</div>

			<div class="shop-photos-wrapper">
				<hr>
				<div class="form-item">
					<span class="form-item-title">图集：</span>
					<div class="form-item-content shop-images-wrapper">
						<ul class="photos-ul form-img-list m-0 box-clear">-</ul>
					</div>
				</div>
			</div>

			<div class="shop-content-wrapper">
				<hr>
				<div class="form-item">
					<span class="form-item-title">图文介绍：</span>
					<div class="form-item-content shop-videotex-wrapper">
						<table class="mc-list-table form-view-container max-w-1200">
							<thead>
							<tr>
								<td width="60">类型</td>
								<td>详细内容</td>
							</tr>
							</thead>
							<tbody></tbody>
						</table>
						<span>无</span>
					</div>
				</div>
			</div>

			<div class="form-item pt-10">
				<hr>
				<span class="form-item-title">&nbsp;</span>
				<div class="form-item-content">
					<button type="button" class="btn btn-default btn-big" id="btnEdit" disabled="disabled"><i class="fa fa-pencil"></i> 修改</button>
				</div>
			</div>
		</div>
	</div>


	<!-- 修改小程序资料 -->
	<div class="mc-bg-white border p-15 box-clear" id="editContainer" hidden>
		<input type="file" class="hide" id="fileUploadImage"/>
		<input type="file" class="hide" id="fileUploadImagesForContent" multiple="multiple"/>

		<div class="form-header box-clear mb-30 b-b">
			<div class="mr-10 fl f16"><i class="fa fa-pencil-square"></i> 修改小程序资料</div>
		</div>

		<div class="form-group-wrapper">
			<div class="form-item">
				<span class="form-item-title">小程序名称：</span>
				<div class="form-item-content">
					<input type="text" class="form-control form-input" data-width="normal" data-bind="shop_name" name="shop_name" data-not-null="1" placeholder="小程序名称">
				</div>
			</div>

			<div class="form-item">
				<span class="form-item-title">模板：</span>
				<div class="form-item-content form-item-text" data-bind="template_name"></div>
			</div>

			<div class="form-item" hidden>
				<span class="form-item-title">小程序类型：</span>
				<div class="form-item-content form-item-text">
					<span data-bind="industry_name"></span>
				</div>
			</div>

			<div class="form-item">
				<span class="form-item-title">公司：</span>
				<div class="form-item-content form-item-text" data-bind="company_name" data-default-value="无"></div>
			</div>

			<div class="form-item">
				<span class="form-item-title">联系电话：</span>
				<div class="form-item-content">
					<input type="text" class="form-control form-input" data-width="normal" data-bind="contact" name="contact" data-type="phone" placeholder="联系电话">
					<span class="block f12 mt-5 color-light-gray"><i class="fa fa-info-circle color-cyan"></i> 请输入座机、400电话、手机等格式的号码。</span>
				</div>
			</div>

			<div class="form-item pb-10">
				<span class="form-item-title">联系地址：</span>
				<div class="form-item-content form-item-text">
					<span data-bind="province_name"></span>
					<span data-bind="city_name"></span>
					<span data-bind="district_name"></span>
					<span class="ml-10" data-bind="address"></span>
				</div>
			</div>

			<div class="form-item pb-10">
				<span class="form-item-title">描述：</span>
				<div class="form-item-content">
					<textarea class="form-control form-input max-w-1000" name="description" data-bind="description" data-width="max" placeholder="小程序的描述内容"></textarea>
				</div>
			</div>
			<div class="form-item pb-10">
				<span class="form-item-title">备注：</span>
				<div class="form-item-content">
					<textarea class="form-control form-input max-w-1000" name="remark" data-bind="remark" data-width="max" placeholder="备注信息"></textarea>
				</div>
			</div>
		</div>

		<div class="form-group-wrapper shop-photos-wrapper">
			<hr>
			<div class="form-item">
				<span class="form-item-title">图集(多张)：</span>
				<div class="form-item-content">
					<ul class="form-img-list m-0 box-clear" id="formImgList"></ul>

					<img src="../../images/upload-default-img.png" class="img-thumbnail mb-15"/>
					<div class="color-light-gray">
						<span class="btn btn-info btn-sm btn-file"><input type="file" id="fileImages" multiple/>上传图集</span>
						<p class="mt-5">
							<small>仅支持jpg、gif、png，大小不超过1MB</small>
							<small class="block">建议尺寸 <span class="color-orange">750 &times; 500px</span></small>
						</p>
					</div>
				</div>
			</div>
		</div>

		<div class="form-group-wrapper shop-content-wrapper">
			<hr>
			<div class="form-item">
				<div class="form-item-title"><h5 class="f16">图文介绍</h5></div>
			</div>
			<article class="form-group-article"></article>
		</div>

		<hr>
		<div class="form-item">
			<span class="form-item-title">&nbsp;</span>
			<div class="form-item-content">
				<button type="button" class="btn btn-primary btn-big mr-5" id="btnSave">保存</button>
				<button type="button" class="btn btn-default btn-big" id="btnCancel">取消</button>
			</div>
		</div>
	</div>

	<!-- 图集模板 -->
	<script type="text/html" id="photosTemplate">
		{{each result as item}}<li>
			<input type="hidden" name="file_resource_name" value="{{item.file_resource_name}}"/>
			<input type="hidden" name="file_resource_id" value="{{item.file_resource_id}}"/>
			<p class="image-contain" style="background-image:url({{item.file_resource_name_string || defaultImageUrl}});"></p>
			<i class="fa fa-remove"></i>
		</li>{{/each}}
	</script>

	<!-- 查看 - 图集模板 -->
	<script type="text/html" id="viewPhotosTemplate">
		{{each result as item}}<li>
			<p class="image-contain" style="background-image:url({{item.file_resource_name_string || defaultImageUrl}});"></p>
		</li>{{/each}}
	</script>

	<!-- 内容模块 模板 - 2 -->
	<script type="text/html" id="editContent_2_Template">
		{{each result as item}}<section class="row" style="display:{{display || 'none'}};">
			<div class="box-clear">
				<input type="hidden" name="videotex_picture_src" value="{{item.videotex_picture_src}}"/>
				<input type="hidden" name="videotex_id" value="{{item.videotex_id}}"/>
				{{if item.videotex_title || item.type == 'title'}}<div class="form-item">
					<span class="form-item-title">标题：</span>
					<div class="form-item-content">
						<input class="form-control form-input max-w-1000" name="videotex_title" value="{{item.videotex_title}}" data-width="max" maxlength="200" placeholder="标题"/>
						<div class="mt-5 color-light-gray"><small>标题在小程序内“加粗高亮显示”</small></div>
					</div>
				</div>{{else if item.videotex_content || item.type == 'content'}}
				<div class="form-item">
					<span class="form-item-title">内容：</span>
					<div class="form-item-content">
						<textarea class="form-control form-input max-w-1000" name="videotex_content" data-width="max" maxlength="12000" placeholder="内容">{{item.videotex_content}}</textarea>
					</div>
				</div>{{else}}
				<div class="form-item">
					<span class="form-item-title">图片：</span>
					<div class="form-item-content">
						<div class="form-image-wrapper fl">
							<span class="image-contain" style="background-image:url({{item.videotex_picture_src_string || defaultImageUrl}});"></span>
						</div>
						<div class="mt-10 ml-10 fl">
							<span class="btn btn-info btn-sm btn-file btn-file-single">修改图片</span>
							<p class="mt-5 color-light-gray">
								<small>仅支持jpg、gif、png，大小不超过1MB</small>
								<small class="block">建议尺寸: 宽度不低于750px</small>
							</p>
						</div>
					</div>
				</div>{{/if}}
			</div>

			<div class="form-item form-col">
				<span class="form-item-title">&nbsp;</span>
				<div class="form-item-content">
					<span class="btn mc-btn-blue-line btn-sm btn-control" data-mode="images" title="可批量上传，建议尺寸：宽度不低于750px"><i class="fa fa-plus-circle"></i> 图片</span>
					<span class="btn mc-btn-blue-line btn-sm btn-control" data-mode="title"><i class="fa fa-plus-circle"></i> 标题</span>
					<span class="btn mc-btn-blue-line btn-sm btn-control" data-mode="content"><i class="fa fa-plus-circle"></i> 内容</span>
					<span class="btn btn-default btn-sm ml-10 btn-control" data-mode="remove"><i class="fa fa-times-circle"></i> 移除</span>
					<span class="btn btn-default btn-sm ml-10 btn-control" data-mode="move-up"><i class="fa fa-angle-double-up"></i> 上移</span>
					<span class="btn btn-default btn-sm btn-control" data-mode="move-down"><i class="fa fa-angle-double-down"></i> 下移</span>
				</div>
			</div>
		</section>{{/each}}
		{{if !result.length}}<div class="content-none">暂无图文内容!</div> {{/if}}
	</script>

	<!-- 查看 - 内容模块 模板 - 2 -->
	<script type="text/html" id="viewContent_2_Template">
		{{each result as item index}}<tr>
			{{if item.videotex_title}}
			<td class="color-light-gray">标题</td>
			<td>{{item.videotex_title}}</td>
			{{else if item.videotex_picture_src_string}}
			<td class="color-light-gray">图片</td>
			<td><a class="image-contain wh-40 block" href="{{item.videotex_picture_src_string || '#'}}" {{if item.videotex_picture_src_string}}target="_blank"{{/if}} style="background-image: url({{item.videotex_picture_src_string || defaultImageUrl}});"></a></td>
			{{else}}
			<td class="color-light-gray">内容</td>
			<td>{{item.videotex_content}}</td>
			{{/if}}
		</tr>{{/each}}
		{{if !result.length}}<tr><td colspan="2">无</td></tr>{{/if}}
	</script>

	<!-- 修改 -->
	<div class="mc-bg-white border p-15 box-clear" id="editFormContainer" hidden>
		<div class="form-header box-clear mb-20 b-b">
			<div class="mr-10 f18" id="editTile">
				<span data-mode="new"><i class="fa fa-plus-square"></i> <span>查看预约信息</span></span>
				<span data-mode="edit"><i class="fa fa-pencil-square"></i> <span>修改预约状态</span></span>
			</div>
		</div>

		<div class="form-group-wrapper box-clear">
			<div class="box-clear view-data-container" id="editBaseInfo">
				<div class="form-item">
					<span class="form-item-title">标题：</span>
					<div class="form-item-content" data-bind="title"></div>
				</div>
				<div class="form-item">
					<span class="form-item-title">封面：</span>
					<div class="form-item-content">
						<div class="form-image-wrapper fl">
							<span class="image-contain" data-bind="cover_src_string" data-bind-type="bg-img" style="background-image:url(../../../images/upload-default-img.png);"></span>
						</div>
					</div>
				</div>
				<div class="form-item">
					<span class="form-item-title">状态：</span>
					<div class="form-item-content" data-bind="#status_text"></div>
				</div>
				<div class="form-item">
					<span class="form-item-title">预约时间：</span>
					<div class="form-item-content" data-bind="booking_time"></div>
				</div>
				<div class="form-item">
					<span class="form-item-title">价格：</span>
					<div class="form-item-content strong color-orange">￥<span data-bind="price" data-default-value="0"></span></div>
				</div>
				<div class="form-item">
					<span class="form-item-title">备注：</span>
					<div class="form-item-content" data-bind="remark" data-default-value="-"></div>
				</div>

			</div>

			<div class="edit-tools">
				<hr>
				<div class="form-item mb-0">
					<div class="form-item-title"><h4 class="mt-0 pb-5 f16">更改状态</h4></div>
				</div>
				<div class="form-item mb-15">
					<span class="form-item-title">执行操作：</span>
					<div class="form-item-content" id="statusTools">
						<div data-status="1">
							<span class="btn btn-sm btn-success btn-edit mr-15" data-status="2"><i class="fa fa-check"></i> 预约成功</span>
							<span class="btn btn-sm btn-danger btn-edit" data-status="3" data-toggle="modal" data-target="#changeStatusModal"><i class="fa fa-exclamation-triangle"></i> 预约失败</span>
						</div>
						<div data-status="2">
							<span class="btn btn-sm btn-primary btn-edit mr-15" data-status="5"><i class="fa fa-handshake-o"></i> 完成预约</span>
							<span class="btn btn-sm btn-warning btn-edit" data-status="4" data-toggle="modal" data-target="#changeStatusModal"><i class="fa fa-remove"></i> 取消预约</span>
						</div>
						<div data-status="-1">已终止</div>
					</div>
				</div>
			</div>

			<hr>
			<div class="form-item mt-30 mb-15">
				<span class="form-item-title">&nbsp;</span>
				<div class="form-item-content">
					<button type="button" class="btn btn-sm btn-default btn-big" id="btnEditFormCancel">关闭</button>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript" src="../../scripts/files-ver-controller.js"></script>
	<script type="text/javascript">
        loadJs({
            fileUploadJs: true,
            files: [
                '../../scripts/local/store-common.js',
                '../../scripts/local/store-edit.js'
            ]
        });
	</script>
</body>
</html>